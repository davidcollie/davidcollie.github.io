<!DOCTYPE html>
<html>
  <head>
    <title>Event Page</title>

    <meta charset='UTF-8'>

    <script type='text/javascript' src="//play.vidyard.com/v0/api.js"></script>

    <script type='text/javascript'>
      function getVyPlayer() {
        var url = window.location.href;
        var queryParams = url.split('?');
        if (queryParams.length < 2) { return null; }

        var vyPlayerId = null;
        var params = queryParams[1].split('&');
        params.some(function(p) {
          if (p.indexOf('vy-player') !== -1) {
            vyPlayerId = p.split('=')[1];
          }
          return vyPlayerId !== null;
        });
        return vyPlayerId;
      }

      function injectVyPlayer(id) {
        if (!id) { return; }

        var s = document.createElement('script');
        s.setAttribute('type', 'text/javascript');
        s.setAttribute('id', 'vidyard_embed_code_' + id);
        s.setAttribute('src', '//play.vidyard.com/' + id + '.js?v=3.1.1&type=lightbox');

        document.body.appendChild(s);
      }

      function startVyPlayer(id) {
        if (!id) { return; }

        var fnName = 'fn_vidyard_' + id;
        console.log(fnName);
        if (window[fnName]) {
          console.log('calling player function');
          window[fnName]();
        }
      }

      window.onload = function() {
        var id = getVyPlayer();
        console.log('player id: ' + id);
        injectVyPlayer(id);
        startVyPlayer(id);
      }
    </script>

    <style type='text/css'>
      body {
        padding: 1em;
      }
    </style>
  </head>

  <body>
    <h1>Event Landing Page</h1>

    <p>This is an event landing page.  It has lots of information about your event.</p>
    <p>It would be great to overlay a video on this site.</p>
  </body>
</html>
